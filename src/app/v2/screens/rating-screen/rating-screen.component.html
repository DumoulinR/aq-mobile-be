<ion-content>
  <app-background>
    <app-location-swipe (locationChange)="onLocationChange($event)" [activeIndex]="activeIndex" [locations]="locations"></app-location-swipe>

    <ng-container *ngIf="!isFeedbackGiven">
      <app-circle-chart [belAqi]="currentActiveIndex"></app-circle-chart>

      <div class="rating ion-padding">
        <p>{{ 'v2.screens.rating-screen.does-it-match' | translate  }}</p>

        <app-feedback [location]="currentActiveIndex?.location" (feedbackOpened)="feedbackOpened()" (feedbackGiven)="feedbackGiven($event)"></app-feedback>
      </div>
    </ng-container>

    <div class="rating--info" *ngIf="!isFeedbackOpened && !isFeedbackGiven">
      <p>
        {{ 'v2.screens.rating-screen.calculated-value' | translate  }}
      </p>

      <strong>{{ 'v2.screens.rating-screen.possible-causes' | translate }}</strong>

      <ion-item lines="none">
        <ion-icon src="/assets/images/icons/vuur.svg" slot="start"></ion-icon>
        <ion-label class="ion-text-wrap" [innerHTML]="'v2.screens.rating-screen.fire' | translate"></ion-label>
      </ion-item>

      <ion-item lines="none">
        <ion-icon src="/assets/images/icons/auto.svg" slot="start"></ion-icon>
        <ion-label class="ion-text-wrap" [innerHTML]="'v2.screens.rating-screen.exhaust' | translate"></ion-label>
      </ion-item>

      <ion-item lines="none">
        <ion-icon src="/assets/images/icons/fabriek.svg" slot="start"></ion-icon>
        <ion-label class="ion-text-wrap" [innerHTML]="'v2.screens.rating-screen.industry' | translate"></ion-label>
      </ion-item>

      <ion-item lines="none">
        <ion-icon src="/assets/images/icons/agriculture.svg" slot="start"></ion-icon>
        <ion-label class="ion-text-wrap" [innerHTML]="'v2.screens.rating-screen.agriculture' | translate"></ion-label>
      </ion-item>
    </div>

    <ng-container *ngIf="isFeedbackGiven">
      <app-success-display [feedbackStats]="feedbackStats" [location]="currentActiveIndex?.location"></app-success-display>
    </ng-container>
  </app-background>
</ion-content>
